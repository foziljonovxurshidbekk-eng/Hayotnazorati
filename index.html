<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hayot Kundaligi — v3 (online)</title>
  <link rel="stylesheet" href="styles.css">
  <script defer src="app.js"></script>
</head>
<body>
  <header class="container">
    <h1>Hayot Kundaligi</h1>
    <p class="subtitle">Uyqu • Zal • Suv • Ovqat • Fokus</p>
    <div id="status" class="status">⏳ Offline</div>
  </header>

  <main class="container">
    <!-- SLEEP -->
    <section class="card">
      <div class="card-head">
        <h2>Uyqu</h2>
        <div class="range-switch">
          <button class="range-btn" data-range="week">Hafta</button>
          <button class="range-btn" data-range="month">Oy</button>
          <button class="range-btn" data-range="year">Yil</button>
        </div>
      </div>
      <div class="grid-2">
        <div>
          <div class="btn-row">
            <button id="sleep-start-btn" class="btn primary">Uyquga yotdim</button>
            <button id="sleep-end-btn" class="btn success">Uyg'ondim</button>
          </div>
          <details class="inline-details">
            <summary>Qo'lda kiritish</summary>
            <div class="inline">
              <input type="datetime-local" id="sleep-start-manual">
              <input type="datetime-local" id="sleep-end-manual">
              <button id="sleep-save-manual" class="btn ghost">Saqlash</button>
            </div>
          </details>
          <h3>Oxirgi yozuvlar</h3>
          <table class="mini">
            <thead><tr><th>Sana</th><th>Boshlanish</th><th>Tugash</th><th>Soat</th></tr></thead>
            <tbody id="sleep-last-rows"></tbody>
          </table>
        </div>
        <div>
          <canvas id="sleepCanvas" width="600" height="220" class="spark"></canvas>
        </div>
      </div>
    </section>

    <!-- WORKOUT + CHEAT -->
    <section class="card">
      <div class="card-head">
        <h2>Zal (3×/hafta)</h2>
        <div class="week-strip" id="week-strip"></div>
      </div>
      <div class="grid-2">
        <div>
          <div class="btn-row">
            <select id="workout-type" class="select">
              <option value="gym">Gym</option>
              <option value="cardio">Cardio</option>
              <option value="home">Home</option>
              <option value="sport">Sport</option>
            </select>
            <button id="workout-done-btn" class="btn primary">Bugun zalga bordim</button>
          </div>
          <div class="progress-wrap">
            <div class="progress" id="wo-progress"><span id="wo-progress-label">0/3</span></div>
          </div>
          <div class="cheat-wrap">
            <label class="switch">
              <input type="checkbox" id="cheat-toggle">
              <span class="slider"></span>
            </label>
            <span class="switch-label">Haftalik cheat day</span>
          </div>
        </div>
        <div>
          <canvas id="workoutCanvas" width="600" height="220" class="spark"></canvas>
        </div>
      </div>
      <div class="grid-2">
        <div>
          <h3>Cheat day statistikasi (6 oy)</h3>
          <canvas id="cheatCanvas" width="600" height="200" class="spark"></canvas>
        </div>
      </div>
    </section>

    <!-- WATER -->
    <section class="card">
      <div class="card-head">
        <h2>Suv</h2>
        <div class="range-switch">
          <button class="water-range-btn" data-range="week">Hafta</button>
          <button class="water-range-btn" data-range="month">Oy</button>
          <button class="water-range-btn" data-range="year">Yil</button>
        </div>
      </div>
      <div class="grid-2">
        <div>
          <div class="btn-row">
            <button class="btn primary" data-water="+0.25">+0.25L</button>
            <button class="btn primary" data-water="+0.5">+0.5L</button>
            <button class="btn primary" data-water="+1">+1L</button>
            <button id="water-reset" class="btn ghost">Bugun 0</button>
          </div>
          <h3>Bugun: <span id="water-today">0</span> L</h3>
        </div>
        <div>
          <canvas id="waterCanvas" width="600" height="220" class="spark"></canvas>
        </div>
      </div>
    </section>

    <!-- MEALS -->
    <section class="card">
      <div class="card-head">
        <h2>Ovqat</h2>
        <div class="range-switch">
          <button class="meal-range-btn" data-range="week">Hafta</button>
          <button class="meal-range-btn" data-range="month">Oy</button>
          <button class="meal-range-btn" data-range="year">Yil</button>
        </div>
      </div>
      <div class="grid-2">
        <div>
          <div class="inline">
            <select id="meal-type" class="select">
              <option value="nonushta">Nonushta</option>
              <option value="tushlik">Tushlik</option>
              <option value="kechki">Kechki</option>
              <option value="snack">Snack</option>
            </select>
            <input id="meal-text" placeholder="Masalan: plov 650kcal yoki '2 somsa'" class="input">
            <button id="meal-add-btn" class="btn primary">Qo'shish</button>
          </div>
          <h3>Bugungi ovqatlar</h3>
          <table class="mini">
            <thead><tr><th>Vaqt</th><th>Turi</th><th>Ta'rif</th><th>kcal</th></tr></thead>
            <tbody id="meals-today-rows"></tbody>
            <tfoot><tr><td colspan="3">Jami</td><td id="meals-today-total">0</td></tr></tfoot>
          </table>
        </div>
        <div>
          <canvas id="mealsCanvas" width="600" height="220" class="spark"></canvas>
        </div>
      </div>
    </section>

    <!-- INTEGRATION -->
    <section class="card">
      <h2>Google Drive integratsiyasi</h2>
      <p class="muted">Web-app URL bir marta saqlansa, har bir o‘zgarish avtomatik yuboriladi. Qo‘lda test uchun “Hozir yuborish”.</p>
      <div class="inline">
        <input id="gas-url" placeholder="https://script.google.com/macros/s/...../exec" class="input wide">
        <button id="save-gas" class="btn primary">Saqlash</button>
        <button id="send-now" class="btn ghost">Hozir yuborish</button>
      </div>
    </section>

  </main>

  <footer class="container"><p>© 2025 Hayot Kundaligi — v3 (online)</p></footer>
</body>
</html>
